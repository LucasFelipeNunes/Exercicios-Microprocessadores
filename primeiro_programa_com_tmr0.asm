__CONFIG _WDT_ON & _XT_OSC & _LVP_OFF & _BODEN_OFF
   
   		#INCLUDE	<P16F877.INC>
		ORG			00h
		GOTO		CONFIG
		ORG			04h
		RETFIE
   
CONFIG	BCF			STATUS,RP0
		BCF			STATUS,RP1
		CLRF		PORTA

   		CLRF		PORTB
			
   		CLRF		PORTC
			
   		CLRF		PORTD
			
   		CLRF		PORTE

		CLRF		CCPR1L
   
	  	BSF			STATUS,RP0
	  	MOVLW		0Fh
		MOVWF		TRISB
	
		MOVLW		00h
		MOVWF		TRISA
   
		MOVWF		TRISC
   
		MOVWF		TRISD
   
		MOVWF		TRISE

		MOVLW		06h
		MOVWF		ADCON1
	
	  	MOVLW		DFh
		MOVWF		OPTION_REG

		MOVLW		00h
		MOVWF		INTCON

		MOVLW		FFh
		MOVWF		PR2

   		BCF			STATUS,RP0

		MOVLW		07h
		MOVWF		T2CON
   		MOVLW		0Fh
		MOVWF		CCP1CON

   		MOVLW		FEh
	  	MOVWF		PORTC

PRINCI	CLR			WDT
  		BTFSS		PORTB,0

  		CALL		TECLA0

  		BTFSS		PORTB,1

  		CALL		TECLA1

  		BTFSS		PORTB,2

  		CALL		TECLA2

  		BTFSS		PORTB,3

  		CALL		TECLA3

  		BTFSS		PRINCI

TECLA0	CLR			WDT
  		BTFSS		PORTB,0

  		GOTO		$-01
	 	MOVLW		00h

 		MOVWF		CCPR1L
		BCF			CCP1CON,5
		BCF			CCP1CON,4
   		RETURN
TECLA1	CLR			WDT
  		BTFSS		PORTB,1

  		GOTO		$-01
	 	MOVLW		55h

 		MOVWF		CCPR1L
		BCF			CCP1CON,5
		BCF			CCP1CON,4
   		RETURN
TECLA2	CLR			WDT
  		BTFSS		PORTB,2

  		GOTO		$-01
	 	MOVLW		AAh

 		MOVWF		CCPR1L
		BCF			CCP1CON,5
		BCF			CCP1CON,4
   		RETURN
TECLA3	CLR			WDT
  		BTFSS		PORTB,2

  		GOTO		$-01
	 	MOVLW		AAh

 		MOVWF		CCPR1L
		BCF			CCP1CON,5
		BCF			CCP1CON,4
   		RETURN
	 	END
